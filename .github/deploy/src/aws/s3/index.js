'use strict'
Object.defineProperty(exports, '__esModule', { value: true })
exports.createBucketDeployment = exports.createBucket = void 0
const aws_cdk_lib_1 = require('aws-cdk-lib')
const aws_s3_1 = require('aws-cdk-lib/aws-s3')
const aws_s3_deployment_1 = require('aws-cdk-lib/aws-s3-deployment')
const createBucket = (props) => {
  const { scope, bucketName, env } = props
  return new aws_s3_1.Bucket(scope, `${bucketName}-${env}`, {
    bucketName: `${bucketName}-${env}`,
    publicReadAccess: false,
    autoDeleteObjects: true,
    removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
    accessControl: aws_s3_1.BucketAccessControl.PRIVATE,
    objectOwnership: aws_s3_1.ObjectOwnership.BUCKET_OWNER_ENFORCED,
    encryption: aws_s3_1.BucketEncryption.S3_MANAGED,
  })
}
exports.createBucket = createBucket
const createBucketDeployment = (props) => {
  const { scope, bucket, filePath, env } = props
  return new aws_s3_deployment_1.BucketDeployment(scope, `${env}-bucket-deployment`, {
    destinationBucket: bucket,
    sources: [aws_s3_deployment_1.Source.asset(filePath)],
  })
}
exports.createBucketDeployment = createBucketDeployment
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBa0Q7QUFDbEQsK0NBQTRHO0FBQzVHLHFFQUF3RTtBQWVqRSxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQXdCLEVBQVcsRUFBRTtJQUNoRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUE7SUFFeEMsT0FBTyxJQUFJLGVBQU0sQ0FBQyxLQUFLLEVBQUUsR0FBRyxVQUFVLElBQUksR0FBRyxFQUFFLEVBQUU7UUFDL0MsVUFBVSxFQUFFLEdBQUcsVUFBVSxJQUFJLEdBQUcsRUFBRTtRQUNsQyxnQkFBZ0IsRUFBRSxLQUFLO1FBQ3ZCLGlCQUFpQixFQUFFLElBQUk7UUFDdkIsYUFBYSxFQUFFLDJCQUFhLENBQUMsT0FBTztRQUNwQyxhQUFhLEVBQUUsNEJBQW1CLENBQUMsT0FBTztRQUMxQyxlQUFlLEVBQUUsd0JBQWUsQ0FBQyxxQkFBcUI7UUFDdEQsVUFBVSxFQUFFLHlCQUFnQixDQUFDLFVBQVU7S0FDeEMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFBO0FBWlksUUFBQSxZQUFZLGdCQVl4QjtBQUVNLE1BQU0sc0JBQXNCLEdBQUcsQ0FBQyxLQUFrQyxFQUFvQixFQUFFO0lBQzdGLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUE7SUFFOUMsT0FBTyxJQUFJLG9DQUFnQixDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsb0JBQW9CLEVBQUU7UUFDN0QsaUJBQWlCLEVBQUUsTUFBTTtRQUN6QixPQUFPLEVBQUUsQ0FBQywwQkFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUNsQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUE7QUFQWSxRQUFBLHNCQUFzQiwwQkFPbEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZW1vdmFsUG9saWN5LCBTdGFjayB9IGZyb20gJ2F3cy1jZGstbGliJ1xuaW1wb3J0IHsgQnVja2V0LCBCdWNrZXRBY2Nlc3NDb250cm9sLCBCdWNrZXRFbmNyeXB0aW9uLCBJQnVja2V0LCBPYmplY3RPd25lcnNoaXAgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMnXG5pbXBvcnQgeyBCdWNrZXREZXBsb3ltZW50LCBTb3VyY2UgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMtZGVwbG95bWVudCdcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCdWNrZXRQcm9wcyB7XG4gIHNjb3BlOiBTdGFja1xuICBidWNrZXROYW1lOiBzdHJpbmdcbiAgZW52OiAncHJvZCcgfCAnZGV2J1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUJ1Y2tldERlcGxveW1lbnRQcm9wcyB7XG4gIHNjb3BlOiBTdGFja1xuICBidWNrZXQ6IElCdWNrZXRcbiAgZmlsZVBhdGg6IHN0cmluZ1xuICBlbnY6ICdwcm9kJyB8ICdkZXYnXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVCdWNrZXQgPSAocHJvcHM6IENyZWF0ZUJ1Y2tldFByb3BzKTogSUJ1Y2tldCA9PiB7XG4gIGNvbnN0IHsgc2NvcGUsIGJ1Y2tldE5hbWUsIGVudiB9ID0gcHJvcHNcblxuICByZXR1cm4gbmV3IEJ1Y2tldChzY29wZSwgYCR7YnVja2V0TmFtZX0tJHtlbnZ9YCwge1xuICAgIGJ1Y2tldE5hbWU6IGAke2J1Y2tldE5hbWV9LSR7ZW52fWAsXG4gICAgcHVibGljUmVhZEFjY2VzczogZmFsc2UsXG4gICAgYXV0b0RlbGV0ZU9iamVjdHM6IHRydWUsXG4gICAgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxuICAgIGFjY2Vzc0NvbnRyb2w6IEJ1Y2tldEFjY2Vzc0NvbnRyb2wuUFJJVkFURSxcbiAgICBvYmplY3RPd25lcnNoaXA6IE9iamVjdE93bmVyc2hpcC5CVUNLRVRfT1dORVJfRU5GT1JDRUQsXG4gICAgZW5jcnlwdGlvbjogQnVja2V0RW5jcnlwdGlvbi5TM19NQU5BR0VELFxuICB9KVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQnVja2V0RGVwbG95bWVudCA9IChwcm9wczogQ3JlYXRlQnVja2V0RGVwbG95bWVudFByb3BzKTogQnVja2V0RGVwbG95bWVudCA9PiB7XG4gIGNvbnN0IHsgc2NvcGUsIGJ1Y2tldCwgZmlsZVBhdGgsIGVudiB9ID0gcHJvcHNcblxuICByZXR1cm4gbmV3IEJ1Y2tldERlcGxveW1lbnQoc2NvcGUsIGAke2Vudn0tYnVja2V0LWRlcGxveW1lbnRgLCB7XG4gICAgZGVzdGluYXRpb25CdWNrZXQ6IGJ1Y2tldCxcbiAgICBzb3VyY2VzOiBbU291cmNlLmFzc2V0KGZpbGVQYXRoKV0sXG4gIH0pXG59XG4iXX0=
